<div class="ngx-search-bar">
  <div class="bar">
    <div class="bar-container">
      <h1 class="title">{{ title }}</h1>
      <div class="content-input-search">
        <button class="btn-search" (click)="search()">
          <!-- <mat-icon>search</mat-icon> -->
          <!-- <span> -->
            <svg
              stroke="currentColor"
              fill="currentColor"
              stroke-width="0"
              viewBox="0 0 16 16"
              height="10px"
              width="10px"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"
              ></path>
            </svg>
          <!-- </span> -->
        </button>
        <input autofocus class="input-search" type="text" [formControl]="formSearch" />
        <mat-spinner *ngIf="isLoading" class="spinner" [diameter]="20"></mat-spinner>
      </div>
      <div class="bar-buttons">
        <ng-content select="[buttons]"></ng-content>

        <ng-container *ngIf="withFilter">
            <button
              class="btn-filter"
              [matBadge]="queryParamsNotNUllForTemplate.size || null"
              
              [matMenuTriggerFor]="menuRef"
            >
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M21 3H5a1 1 0 0 0-1 1v2.59c0 .523.213 1.037.583 1.407L10 13.414V21a1.001 1.001 0 0 0 1.447.895l4-2c.339-.17.553-.516.553-.895v-5.586l5.417-5.417c.37-.37.583-.884.583-1.407V4a1 1 0 0 0-1-1zm-6.707 9.293A.996.996 0 0 0 14 13v5.382l-2 1V13a.996.996 0 0 0-.293-.707L6 6.59V5h14.001l.002 1.583-5.71 5.71z"></path></svg>            </button>
          <mat-menu
            #menuRef="matMenu"
            x-position="after"
            y-position="below"
            [overlapTrigger]="false"
          >
            <div
              (click)="$event.stopPropagation()"
              (keydown)="$event.stopPropagation()"
            >
              <ng-content select="[filterMenu]"></ng-content>
            </div>
            <div mat-menu-item [disableRipple]="true">
              <button color="accent" mat-raised-button (click)="search()">
                Aplicar filtros
                <mat-icon style="color: inherit">check</mat-icon>
              </button>
            </div>
          </mat-menu>
        </ng-container>
      </div>
    </div>
  </div>
  <div *ngIf="withFilter" class="params-container">
    <mat-chip-set class="d-flex">
      <mat-chip
        *ngFor="let queryParam of queryParamsNotNUllForTemplate | keyvalue"
      >
        {{ queryParam.value.friendlyName
        }}<ng-container *ngIf="queryParam.value.value.value">
          <span class="values">: {{ queryParam.value.value.value }}</span>
        </ng-container>
        <mat-icon matChipRemove (click)="removeQueryParam(queryParam.key)"
          >cancel</mat-icon
        >
      </mat-chip>
    </mat-chip-set>
  </div>
  <div class="content">
    <ng-content></ng-content>
  </div>

 
</div>
